%----------------------------------------------------------
\chapter{Аналитический обзор}\label{chap2_comp_method}
%----------------------------------------------------------
Был проведён сравнительный анализ программного каркаса comsdk с аналогичным программным комплексом, в котором реализованы диаграммы потоков данных. В качестве такой реализации был рассмотрен программный комплекс pSeven, разработанный отечественной компанией DATADVANCE. Он направлен в первую очередь на решение конструкторских, оптимизационных задач и, помимо этого, задач анализа данных, что в первом приближении делает его аналогом comsdk по предметному назначению.

В терминах \textsf{pSeven}: графовое описание процесса решения задачи называется \textit{расчетной схемой} (англ.~workflow); вершинам графового описания поставлены в соответствие процессы обработки данных (используется термин \textit{блоки}), а рёбра определяют \textit{связи} между блоками и направления передачи данных между процессами~\cite{NazarenkoDFM2015}. При работе с pSeven используются следующие понятия:
\begin{itemize}
    \item \textsf{расчётная схема} -- формальное описание процесса решения некоторой задачи в виде ориентированного графа;
    \item \textsf{блок} -- программный контейнер для некоторого процесса обработки данных, входные и выходные данные для которого задаются через порты (см.~ниже);
    \item \textsf{порт} -- переменная конкретного\footnote{Динамическая типизация не поддерживается.} типа, определённая в блоке и имеющая уникальное имя в его пределах;
    \item \textsf{связь} -- направленное соединение типа ``один к одному'' между выходным и входным портами разных блоков.
\end{itemize}

С учётом данных понятий можно описать используемую методологию диаграмм потоков данных следующим образом. Расчётная схема содержит в себе набор процессов обработки данных (блоков), каждый из которых имеет (возможно, пустой) набор именованных входов и выходов (портов). Данные передаются через связи. Для избежания т.н. гонок данных (англ.~data races) множественные связи с одним и тем же входным портом не поддерживаются. Для начала выполнения каждому блоку требуются данные на всех входных портах. Все данные на выходных портах формируются по завершении исполнения блока~\cite{NazarenkoDFM2015}.

Сравнение реализаций двух подходов проводилось по следующим критериям:
\begin{itemize}
    \item особенности реализуемого подхода,
    \item особенности программной реализации,
    \item особенности взаимодействия пользователя с реализованной системой.
\end{itemize}
С учётом этого были выделены конкретные признаки для сравнения:
\begin{itemize}
    \item предметное назначение,
    \item значение вершины графа, описывающего алгоритм,
    \item значение ребра графа, описывающего алгоритм,
    \item топология графа, описывающего решение,
    \item поддержка иерархических графовых описаний, когда одно графовое описание является частью (ребром или вершиной) другого
    \item принцип передачи данных между отдельными этапами описываемого алгоритма,
    \item необходимость указывать входные и выходные данные каждого шага алгоритма
    \item язык программной реализации,
    \item файловый формат графовых описаний,
    \item файловая структура проекта реализуемого алгоритма,
    \item поддерживаемые типы данных,
    \item принцип ввода входных данных для алгоритма и его параметров,
    \item принцип вывода результатов работы алгоритма,
    \item поддержка параллельного выполнения незавимых шагов алгоритма,
    \item поддержка распределённого выполнения отдельных этапов алгоритма на вычислительном кластере,
    \item наличие графического редактора графовых описаний
    \item средства визуализации результатов работы алгоритма,
    \item поддержка алгоритмов, требующих принятие решения от пользователя,
    \item возможность дополнения набора входных данных во время работы алгоритма.
\end{itemize}

Результаты проведённого сравнения представлены в таблице \ref{rndhpcblo.0209}.

\begin{landscape}
    \begin{longtable}{|p{0.03\linewidth}|p{0.2\linewidth}|p{0.35\linewidth}|p{0.35\linewidth}|}
        \caption{Сравнительная таблица}\label{rndhpcblo.020 9}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \\
        \hline
        \textbf{№} & \textbf{Признак}                                                                           & \textbf{pSeven}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   & \textbf{comsdk}                                                                                                                                                                                                                                                                   \\
        \hline
        1          & Предметное назначение                                                                      & Задачи оптимизации, анализ данных                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 & Задачи автоматизированного проектирования, алгоритмизация сложных вычислительных методов, анализ данных                                                                                                                                                                           \\
        \hline
        2          & Значение вершины графа, описывающего алгоритм                                              & Блок (процесс обработки данных)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   & состояние данных                                                                                                                                                                                                                                                                  \\
        \hline
        3          & Значение ребра графа, описывающего алгоритм                                                & Связь (направление передачи данных)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               & переход меду состояниями с указанием функций, осуществляющих переход                                                                                                                                                                                                              \\
        \hline
        4          & Топология графа, описывающего решение                                                      & По умолчанию поддерживаются только ациклические графы. Поддерживаемая топология расширяется засчёт специальных управляющих блоков, которые отслеживают выполнение условий: для условного ветвления используется блок "Условие" (англ. condition), который перенаправляет данные на один из выходных портов в зависимости от выполнения описанного условия (подробнее см. \cite{pSevenDocsConditons2022}); Для реализации циклов в общем случае используются блоки "Цикл" (англ. loop)\cite{pSevenDocsWorkflow2021}, но для некоторых задач существуют специализированные блоки, организующие логику работы цикла (например, блок "Оптимизатор" (англ.~optimizer)) & Любая                                                                                                                                                                                                                                                                             \\
        \hline
        5          & Поддержка иерархических графовых описаний                                                  & \multicolumn{2}{c|}{Присутствует}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \\
        \hline
        6          & Принцип передачи данных между отдельными этапами описываемого алгоритма                    & Данные между узлами передаются согласно определйнным связям, которые на уровне выполнения создают пространство в памяти для ввода и вывода данных для выполняемых в раздельных процессах блоков. Транзитная передача данных, которые не изменяются в данном блоке, на выход невозможна.                                                                                                                                                                                                                                                                                                                                                                           & Поскольку узлами графа являются состояния данных, существует возможность задействовать в расчётах только часть данных, оставляя их другую часть неизменной. Фактической передачи данных не производится.                                                                          \\
        \hline
        7          & Необходимость указывать входные и выходные данные каждого шага алгоритма                   & Присутствует                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      & Отсутствует                                                                                                                                                                                                                                                                       \\
        \hline
        8          & Язык программной реализации                                                                & \multicolumn{2}{c|}{С++, Python}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      \\
        \hline
        9          & Файловый формат графовых описаний                                                          & Расчетная схема (в форме орграфа) сохраняется в двоичный файле закрытого формата с расширением \textsf{.p7wf}.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    & Графовая модель (определяет алгоритм проведения комплексных вычислений в форме орграфа) сохраняется в текстовом файле открытого формата, подготовленного на языке \gls{aDOT}\cite{SokolovADOT2020}, являющегося ``сужением'' (частным случаем) известного формата DOT (Graphviz). \\
        \hline
        10         & Файловая структура проекта реализуемого алгоритма                                          & Проект состоит из непосредственно файла проекта, в котором хранятся ссылки на созданные расчётные схемы и локальную базу данных, сами расчётные схемы, файлы с их входными данными, файлы отчётов, где сохраняются выходные данные последних расчётов и результаты их анализа.                                                                                                                                                                                                                                                                                                                                                                                    & Проект состоит из \textsf{.aDOT} файла с описанием графа, \textsf{.aINI}-файлов с описанием форматов входных данных, библиотек функций-обработчиков, функций-предикатов и функций-селекторов, файлов, куда записываются выходные данные.                                          \\
        \hline
        11         & Поддерживаемые типы данных                                                                 & Целые числа, числа с плавающей точкой, строки, логические переменные, логические, целочисленные и вещественные векторы и матрицы                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  & Целые и вещественные числа, строки, целочисленные и вещественные векторы                                                                                                                                                                                                          \\
        \hline
        12         & Принцип ввода входных данных для алгоритма и его параметров                                & Входные данные должны быть указаны при настройках внешних входных портов расчётной схемы.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         & Входные данные хранятся в файле в формате \gls{aINI}\cite{SokAINI}, откуда считываются при запуске обхода графа~\cite{SokolovPershin2017}.                                                                                                                                        \\
        \hline
        13         & Принцип вывода результатов работы алгоритма                                                & Данные с выходных портов схемы сохраняются в локальной базе данных. Для их записи в файлы для обработки/анализа вне pSeven необходимо воспользоваться специально предназначенными для этого блоками.                                                                                                                                                                                                                                                                                                                                                                                                                                                              & Для записи выходных/промежуточных данных в файлы или базы данных необходимо добавить соответствующие функции-обработчики. Формат выходных данных не регламентирован.                                                                                                              \\
        \hline
        14         & Поддержка параллельного выполнения независимых шагов алгоритма                             & Присутствует. Блоки, входящие в состав различных ветвлений схемы могут быть выполнены параллельно, поскольку они не зависят друг от друга по используемым данным.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 & Присутствует. Существует возможность обойти различные ветвления графа одновременно.                                                                                                                                                                                               \\
        \hline
        15         & Поддержка распределённого выполнения отдельных этапов алгоритма на вычислительном кластере & Присутствует                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      & В текущей версии отсутствует                                                                                                                                                                                                                                                      \\
        \hline
        16         & Наличие графического редактора графовых описаний                                           & Да                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                & Да\footnote{В виде отдельного веб-приложения}                                                                                                                                                                                                                                     \\
        \hline
        17         & Средства визуализации результатов работы алгоритма                                         & Реализованы как часть системы формирования отчётов (см. выше)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     & В текущей версии отсутствуют                                                                                                                                                                                                                                                      \\
        \hline
        18         & Поддержка алгоритмов, требующих принятие решения от пользователя                           & По умолчанию отсутвует. Требуется реализация дополнительных скриптов на языке Python, отвечающих за взаимодействие с пользователем                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                & Частично присутствует засчёт средства генерации форм ввода\cite{SokolovPershin2017}                                                                                                                                                                                               \\
        \hline
        19         & Возможность дополнения набора входных данных во время работы алгоритма                     & Отсутствует                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       & Частично реализована при помощи функций-обработчиков специального типа, создающих формы ввода                                                                                                                                                                                     \\
        \hline
    \end{longtable}
\end{landscape}

Таким образом, на данный момент comsdk обладает сравнительно меньшим числом функциональных возможностей, чем современные научные системы управления потоком задач, подобные pSeven, но предоставляет потенциально больше средств для взаимодействия реализуемых алгоритмов с пользователем. В условиях существующей на сегодняшней день потребности в отечественном программном обеспечении для реализации сложных численных методов, актуально развитие данного программного каркаса.
%----------------------------------------------------------

