%----------------------------------------------------------
\def\notedate{2023.01.07}
\def\currentauthor{Тришин И.В. (РК6-11М)}
%----------------------------------------------------------
\notestatement{rndhpcpar}{Задача параллельного обхода ориентированного графа с циклами}
%----------------------------------------------------------
\subsubsection{Введение в предметную область}
На сегодняшний день существует класс прикладного программного обеспечения (\glsxtrshort{PO}), направленного на автоматизацию подготовки и проведения вычислительных экспериментов. К такому ПО, среди прочего, относятся так называемые научные системы управления потоком задач (англ. scientific workflow systems). Отличительной особенностью данных систем является возможность составления списка вычислительных задач, которые должны быть решены в рамках вычислительного эксперимента, и выделения зависимостей между ними. В дальнейшем по списку задач и зависимостей между ними определяется очерёдность их решения, и система осуществляет решение задач в установленной последовательности в автоматическом режиме. Такой подход даёт следующие преимущества. Во-первых, возникает возможность разделить обязанности по разработке программных реализаций решений отдельных задач между разработчиками. Во-вторых, возникает возможность переиспользования разработанных программных решений вычислительных задач в будущих экспериментах. Становится возможным создание базы программных реализаций решений типовых задач. В-третьих, в зависимости от реализации системы, для проведения того или иного вычислительного эксперимента могут быть задействованы различные вычислительные мощности: от нескольких потоков процессора на одном персональном компьютере до тысяч узлов на вычислительном кластере. Для задач, легко поддающихся распараллеливанию и масштабированию, научные системы управления потоком задач дают универсальный интерфейс взаимодействия с различными вычислительными ресурсами, что даёт возможность проводить вычислительные эксперименты на машинах с самыми различными архитектурами.

В основе работы научных систем управления потоком задач лежит представление списка задач и зависимостей между ними в виде ориентированного графа. Некоторые системы, как DAGMan\cite{DAGMan2023} и VisTrails\cite{VTDoc2016}, поддерживают только ациклические графы. Тем не менее, для выполнения задач в порядке, определяемым ориентированным графом, необходимо произвести его обход. Как правило, для повышения производительности в научных системах управления потоком задач предусмотрено одновременное выполнение задач, не имеющих между собой зависимостей. Таким образом, возникает дополнительное требование выполнять обход графа в параллельном режиме там, где это возможно.

\subsubsection{Применение стандартных алгоритмов на графах}
В задаче параллельного обхода могут быть применены некоторые стандартные алгоритмы на графах.

Одним из наиболее востребованных для данной задачи алгоритмов является алгоритм проверки графа на наличие циклов. Данная проверка необходима, поскольку в зависимости от её результата для обхода могут быть выбраны, например, алгоритмы предназначенные только для ациклических графов. Для поиска циклов применяется так называемый поиск в глубину. Его псевдокод приведён в листинге~\ref{lst:dfs}
\begin{algorithm}[H]
	\caption{Поиск в глубину}\label{lst:dfs}
	\begin{algorithmic}[1]
		\Procedure{DFS_Visit}{u}
		\State $color[u]$ := GRAY
		\State time := time + 1
		\State $d[u]$ := time \Comment{Устанавливаем момент входа в вершину}
		\For{each $v \in Adj[u]$}
		\If{$color[v]$ = WHITE}
		\State DFS_Visit(v)
		\EndIf
		\EndFor
		\State $color[u]$ = BLACK
		\State time := time + 1
		\State $f[u]$ := time \Comment{Устанавливаем момент выхода из вершины}
		\EndProcedure
	\end{algorithmic}
\end{algorithm}
Доказано\cite{Cormen2005}, что в ориентированном графе нет циклов, если при поиске в глубину в нём не обнаружено ни одного обратного ребра, т.е. по завершении поиска в глубину нет такой пары вершин $u$ и $v$, что $d[u]<d[v]$ и $f[u]>f[v]$.

Для определения очерёдности посещения вершин в графе может быть применена топологическая сортировка. Цель топологической сортировки заключается в том, чтобы подготовить обработки вершин ациклического ориентированного графа таким образом, чтобы каждая вершина была обработана до того, как будут обработаны все вершины, на которые она указывает~\cite{Sedge2002}.

%----------------------------------------------------------
% Атрибуты задачи
\noteattributes{}
%----------------------------------------------------------